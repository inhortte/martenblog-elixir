<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta http-equiv="Content-language" content="en">
	<meta name="author" content="Bob Murry Shelton">
    <title>Martenblog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="../../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../../css/bootstrap-vue.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <link rel="stylesheet" href="../../css/site.css" />
  </head>
  <body style="background: #a8a8a8;">
    <div class="hlavni container">
      <div class="jumbotron">
        <!----><!---->
        <h1>Flavigula</h1> 
        <p>Here lies Martes Flavigula, eternally beneath the splintered earth.</p> 
        <hr class="my-4"> 
        <p>
          <a href="#/blog/1" class="router-link-exact-active router-link-active" aria-current="page">blog</a> |
          <a href="#/music" class="">music</a> |
          <a href="#/poems" class="">poems</a> |
          <a href="#/lakife" class="">lakife</a> |
          <a href="#/login" class="" style="display: none;">log in</a> <a href="#" target="_self" class="">log out</a>
        </p> 
        <p text-muted="" class="sd text-muted" style="display: none;">

        </p>
      </div>

<div class="card">
  <div class="card-header"><h4>Blog -</h4></div>
  <div class="container">
    <div class="row" style="font-size: smaller; font-weight: bold;">
      <div class="col-sm-12 col-md-3" style="text-align: left;">
        
          <a href="/static/blog/1317686400.html" class="">« Tue, 04 Oct, 2011</a>
        
      </div> 
      <div class="col-sm-12 col-md-6" style="text-align: center;">
        <a href="/static/blog/page_1.html" class="">jenju</a>
      </div> 
      <div class="col-sm-12 col-md-3" style="text-align: right;">
        
          <a href="/static/blog/1318291200.html" class="">Tue, 11 Oct, 2011 »</a>
        
      </div>
    </div>
    
      <div class="row">
        <div class="col">
          <div class="card" style="margin-bottom: 20px;">
            <div class="card-body">
              <div class="row">
                <div class="col-sm-12 col-md-9">
                  <div slot="header">
                    <div><em>Ruby has found a Clojure.</em></div>
                    <div><em>Sun, 09 Oct, 2011 17:37</em></div>
                    <div class="list-group list-group-horizontal-sm" style="padding: 10px 0px;">
                      
                        <div class="list-group-item entry-topic">Clojure</div>
                      
                        <div class="list-group-item entry-topic">Martenblog</div>
                      
                        <div class="list-group-item entry-topic">Sheepblog</div>
                      
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-12">
                  <div class="card-text entry">
                    <p>
I’ve begun porting <strong>Sheepblog</strong> (IE, this thing you are looking at right now) from <em>Ruby/Sinatra</em> to <em>Clojure/Noir</em>. I am in the beginning phases, but I believe that the database schema will stay the same for now.</p>
<h4>
New features</h4>
<ul>
  <li>
When not creating or editing a post, topics will set the session key :topic to the topic’s id. Any look at /rutabaga will show only posts which pertain to the set topic.  </li>
  <li>
Multiple user capability. Hopefully Christopher will eventually post something.  </li>
  <li>
Comments, by user or anonymous.  </li>
</ul>
<h3>
First problem!</h3>
<p>
<em>clojure.contrib.sql</em> no longer exists. Or, rather, it exists in an outdated form which breaks everything in sight with an unsightly <strong>getRoot not found</strong> or somesuch error. Use <em>clojure.java.jdbc</em> instead.</p>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    
      <div class="row">
        <div class="col">
          <div class="card" style="margin-bottom: 20px;">
            <div class="card-body">
              <div class="row">
                <div class="col-sm-12 col-md-9">
                  <div slot="header">
                    <div><em>The vector is indexable, eh?</em></div>
                    <div><em>Sun, 09 Oct, 2011 22:24</em></div>
                    <div class="list-group list-group-horizontal-sm" style="padding: 10px 0px;">
                      
                        <div class="list-group-item entry-topic">Clojure</div>
                      
                        <div class="list-group-item entry-topic">Martenblog</div>
                      
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-12">
                  <div class="card-text entry">
                    <p>
<strong>Now</strong> a certain error is being an irritant. It looks like this:</p>
<p>
<strong>java.lang.IllegalArgumentException: Key must be integer</strong></p>
<p>
Here is the code spouting the error:</p>
<pre><code>(defpage &quot;/expand/:id&quot; {:keys [id]}
  (let [e (entry/get-record id)]
   (normal-entry e)
   (expand-contract-link &quot;contract&quot; e)))</code></pre>
<p>
As any observant mustelid can see, there is nothing wrong with that code according to the <a href="http://www.webnoir.org/tutorials/routes">Noir documentation</a>. I shall pull out pieces of my pancreas for a few more minutes flummoxing myself about it.</p>
<p>
I dislike it greatly when a problem solves itself, and especially if it is just from tinkering a bit.</p>
<p>
Here is the code:</p>
<pre><code>(defpartial expand-contract-link [which e]
  [:br.clear]
  (link-to {:id (str which (:id e))}
           &quot;#&quot; which)
  [:hr.clear])

(defpartial ajax-hovno []
  [:script &quot;ajax_hovno();&quot;])

(defpartial normal-entry [e]
  (:entry e)
  (expand-contract-link &quot;contract&quot; e)
  (ajax-hovno))

(defpartial truncated-entry [e]
  (trunc (:entry e))
  (expand-contract-link &quot;expand&quot; e)
  (ajax-hovno))

; Ajax paths                                                                    
(defpage &quot;/expand/:id&quot; {:keys [id]}
  (normal-entry (entry/get-record id)))

(defpage &quot;/contract/:id&quot; {:keys [id]}
  (truncated-entry (entry/get-record id)))</code></pre>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    
  </div>
</div>
      <div class="abdomen card-group">
        <div class="card">
          <!---->
          <!---->
          <div class="card-body">
            <!---->
            <!---->
            <p class="card-text">
                <p xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" class="license-text">
                  Along with martens, goulish goats and the rippling fen - <br />
                  <a rel="cc:attributionURL" property="dct:title" href="https://flavigula.net/#/blog/1">
                    these writings 1999-2021
                  </a> by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://flavigula.net">Bob Murry Shelton</a> are licensed under <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0">
                  CC BY-NC-SA 4.0
                  <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" style="height: 22px !important; margin-left: 3px; vertical-align: text-bottom;" />
                  <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" style="height: 22px !important; margin-left: 3px; vertical-align: text-bottom;" />
                  <img src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" style="height: 22px !important; margin-left: 3px; vertical-align: text-bottom;" />
                  <img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1" style="height: 22px !important; margin-left: 3px; vertical-align: text-bottom;" />
                  </a>
                </p> 
                <small><a rel="me" href="https://sonomu.club/@flavigula">Mastodon</a></small> 
                <small><a href="https://proxy.vulpes.one/gemini/thurk.org/index.gemini">Gemini</a></small> 
                <small><a href="https://funkwhale.thurk.org">Funkwhale</a></small> 
                <small><a href="https://flavigula.bandcamp.com">Bandcamp</a></small>
            </p>
          </div>
          <!---->
          <!---->
        </div>
      </div>
    </div>
    <script data-goatcounter="https://goatcounter.zivter.net/count" async src="//goatcounter.zivter.net/count.js"></script>
  </body>
</html>

